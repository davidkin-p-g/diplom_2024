# diplom_2024
# Разработанный код к ВКР
## Визуализация среды
Папка: visualization_environment
### gnerate_map.py
Код который генерит карту любого мира с файла .wbt. Он вытаскивает их файла мира информацию о стенах, после этого разбирается с поворотом и сохраняет все это дело в  .png.
_Функционал:_
- read_wtb_file: Читает текстовый .wtb файл и возвращает данные в виде строки.
- parse_wtb_data: Использует регулярные выражения для извлечения информации о стенах, включая их трансляцию, вращение и размеры.
- create_2d_map: Создает 2D карту на основе списка стен, учитывая их координаты, размеры и угол поворота.
-  save_2d_map: Сохраняет созданную 2D карту в PNG файл.

### generate_my_map.py 
Код который тоже генерит 2d карту мира только уже только моего не самым оптимальным образом, зато работает
word_image.jpg - карта
word.wbt - файл мира

## Генерация дерева путей для PDDL
Папка: tree_movements
### generate_tree.py
Лучшая весрия из существующих генерирующая дерево.
_Функционал:_
- generate_random_points: Генерирует случайные точки на карте с учетом отступов от краев.
- add_start_end_points: Добавляет начальную и конечную точки в список точек.
- connect_points: Создает соединения между точками, если расстояние между ними не превышает максимального значения.
- filter_connections: Фильтрует соединения, удаляя те, которые пересекаются со стенами на карте.
- check_wall_collision: Проверяет, пересекает ли линия между двумя точками стены на карте.
- create_line: Создает список точек, составляющих линию между двумя заданными точками.
- write_connections_to_file: Записывает соединения в файл в формате connected loc-x1-y1 loc-x2-y2 distance.
- add_walls: Добавляет стены.
tree.png - изображение результата
connections.txt - список соединений
### generate_my_tree.py
Код генерит случайные точки на карте, после чего их соединяет исключая связи пересекающие стены. Тут соединяются все точки со всеми, больше похоже на Lazy алгоритм но не совсем.
Не совсем рабочий но как было
first_tree_figure.jpg - визуализация
first_connections.txt - список соединений(без стоимоти ее сам считал)

## Контролер робота
Папка: controller
Контролер робота для управления передвижением при различных сценариях 
### standart_contr.py
Стандартное перемещение робота в неизвестном пространстве. Избегает препятствияй имспользуя LIDAR. Не совсем работает нужно пошаманить с коэффициентами. Супер простой.
### go_to_pddl_contr.py
Перемещение робота по координатам PDDL. Разворачивается пока не будет смотреть с направление точки потом едет на фул скорости прямо. Не совсем работает. Супер простой
### chack_img_contr.py
Получение картинок с RGB и Depth камер. Делает первоначальную настройку изображений что бы ихз потом оюработали нейронки. Работает

## Нейро-функции
Папка: neuro
Тут попытка автоматизации работы всех нейронок по ходу работы контролера. Так как установленные нейронки долго обрабатывают изображения была попытка через API

### automation_neuro.py
_Функционал:_
- push_image_to_github: Так как нужно было сохранять изображение в сети, создал отдельный репозиторий под это
- blip_query: APi запрос к нейронке Blip
- create_image: Запрос к нейронке SAM
- save_mask: Сохранение маски

### PDDL
Папка: PDDL
Отвечает за составление плана по перемещению. Есть только пример, без подстановки реальных результатов из блока с деревом перемещений
### domain.pddl
_Типы:_ Определяет типы объектов (локации).
_Предикаты:_ Определяет предикаты, которые описывают состояние мира (положение робота, связи между локациями и завершение миссии).
_Функции:_ Определяет функцию для вычисления расстояния между локациями и общую длину пути.
_Действия:_
- move: Перемещение робота из одной локации в другую, если локация свободна.
- move_with_cost: То же перемещение, но с учетом времени (расстояния) и увеличения общей длины пути.
- finish_mission: Завершающее действие, которое выполняется, когда робот достигает конечной точки.

### problem.pddl
_Объекты:_ Определяет доступные локации и робота.
_Инициализация:_ Устанавливает начальное состояние (положение робота, связи между локациями, наличие препятствий).
_Цель:_ Указывает конечную цель (робот находится в loc-2-2 и миссия завершена).
_Метрика:_ Определяет метрику для минимизации общей длины пути (total-distance).



